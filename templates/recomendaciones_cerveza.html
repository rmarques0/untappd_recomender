<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<script src="https://cdn.tailwindcss.com"></script>
	<link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
	<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
	<link href="https://cdn.jsdelivr.net/npm/daisyui@5/themes.css" rel="stylesheet" type="text/css" />

	<title>Recomendaciones de {{ cerveza.beer_name }} para {{ user_id }}</title>
</head>

<body class="px-6 py-4 bg-amber-50">
	<div class="flex justify-between items-center mb-6">
		<div>
			<h1 class="text-2xl font-bold text-amber-800">Recomendaciones para {{ user_id }}</h1>
			<p class="text-amber-600">Basado en {{ cerveza.beer_name }}</p>
		</div>
		<div class="text-right">
			<small class="text-gray-600">{{ cant_vistas }} vistas, {{ cant_valoradas }} valoradas</small>
			<br>
			<a href="/reset" class="bg-red-500 hover:bg-red-600 text-white font-semibold text-xs px-3 py-1 mt-2 rounded cursor-pointer transition-colors">
				üîÑ Reset
			</a>
		</div>
	</div>

	<form method="post" action="/recomendaciones" class="flex flex-col w-full space-y-6">
		<!-- Cerveza principal -->
		<div class="flex justify-center">
			<div class="card bg-white shadow-lg border border-amber-200 rounded-lg overflow-hidden max-w-2xl">
				<div class="flex">
					{% if cerveza.image_url %}
					<img src="{{ cerveza.image_url }}" class="w-32 h-40 object-cover" alt="{{ cerveza.beer_name }}" />
					{% else %}
					<div class="w-32 h-40 bg-amber-100 flex items-center justify-center">
						<span class="text-4xl">üç∫</span>
					</div>
					{% endif %}
					
					<div class="card-body p-6 flex-1">
						<h2 class="card-title text-xl font-semibold text-amber-800 mb-3">
							{{ cerveza.beer_name|title }}
						</h2>
						
						<div class="text-gray-600 mb-3">
							<span class="font-medium text-lg">{{ cerveza.brewery_name|title }}</span>
							{% if cerveza.style %}
							<br><span class="text-amber-600 font-medium">{{ cerveza.style }}</span>
							{% endif %}
						</div>

						<div class="flex justify-between text-sm text-gray-500 mb-4">
							{% if cerveza.abv and cerveza.abv != '0' %}
							<span class="bg-amber-100 px-2 py-1 rounded">ABV: {{ cerveza.abv }}%</span>
							{% endif %}
							{% if cerveza.ibu and cerveza.ibu != '0' %}
							<span class="bg-amber-100 px-2 py-1 rounded">IBU: {{ cerveza.ibu }}</span>
							{% endif %}
							{% if cerveza.rating and cerveza.rating != '0' %}
							<span class="bg-amber-100 px-2 py-1 rounded">‚≠ê {{ cerveza.rating }}</span>
							{% endif %}
						</div>

						<div class="card-actions justify-end items-center mt-auto">
							<div class="flex items-center">
								<label for="{{cerveza.beer_id}}" class="text-gray-700 mr-3">Mi puntuaci√≥n:</label>
								<select name="{{cerveza.beer_id}}" aria-label="Puntuaci√≥n para {{ cerveza.beer_name }}" class="px-4 py-2 text-sm border border-amber-300 rounded focus:ring-amber-500 focus:border-amber-500">
									<option value="0" selected>Sin puntuar</option>
									<option value="0.5">0.5</option>
									<option value="1">1</option>
									<option value="1.5">1.5</option>
									<option value="2">2</option>
									<option value="2.5">2.5</option>
									<option value="3">3</option>
									<option value="3.5">3.5</option>
									<option value="4">4</option>
									<option value="4.5">4.5</option>
									<option value="5">5</option>
								</select>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Recomendaciones relacionadas -->
		<div>
			<h2 class="text-xl font-bold text-amber-800 mb-4">Quienes probaron {{ cerveza.beer_name }} tambi√©n probaron...</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
				{% for cerveza in cervezas_recomendadas %}
				<div class="card bg-white shadow-md border border-amber-200 rounded-lg overflow-hidden">
					<div class="flex">
						{% if cerveza.image_url %}
						<img src="{{ cerveza.image_url }}" class="w-20 h-24 object-cover" alt="{{ cerveza.beer_name }}" />
						{% else %}
						<div class="w-20 h-24 bg-amber-100 flex items-center justify-center">
							<span class="text-xl">üç∫</span>
						</div>
						{% endif %}

						<div class="card-body p-3 flex-1">
							<h3 class="card-title text-sm font-semibold text-amber-800 mb-1">
								<a href="/recomendaciones/{{cerveza.beer_id}}" class="hover:text-amber-600 transition-colors">
									{{ cerveza.beer_name|title }}
								</a>
							</h3>
							
							<div class="text-xs text-gray-600 mb-2">
								<span class="font-medium">{{ cerveza.brewery_name|title }}</span>
								{% if cerveza.style %}
								<br><span class="text-amber-600">{{ cerveza.style }}</span>
								{% endif %}
							</div>

							<div class="flex justify-between text-xs text-gray-500 mb-2">
								{% if cerveza.abv and cerveza.abv != '0' %}
								<span>ABV: {{ cerveza.abv }}%</span>
								{% endif %}
								{% if cerveza.rating and cerveza.rating != '0' %}
								<span>‚≠ê {{ cerveza.rating }}</span>
								{% endif %}
							</div>

							<div class="card-actions justify-end items-center mt-auto">
								<div class="flex items-center">
									<label for="{{cerveza.beer_id}}" class="text-xs text-gray-700 mr-1">Puntuaci√≥n:</label>
									<select name="{{cerveza.beer_id}}" aria-label="Puntuaci√≥n para {{ cerveza.beer_name }}" class="px-2 py-1 text-xs border border-amber-300 rounded focus:ring-amber-500 focus:border-amber-500">
										<option value="0" selected>-</option>
										<option value="0.5">0.5</option>
										<option value="1">1</option>
										<option value="1.5">1.5</option>
										<option value="2">2</option>
										<option value="2.5">2.5</option>
										<option value="3">3</option>
										<option value="3.5">3.5</option>
										<option value="4">4</option>
										<option value="4.5">4.5</option>
										<option value="5">5</option>
									</select>
								</div>
							</div>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>

		<div class="flex justify-center">
			<input type="submit" class="bg-amber-600 hover:bg-amber-700 text-white font-semibold px-8 py-3 rounded-lg cursor-pointer transition-colors text-lg" 
				value="Actualizar Opiniones">
		</div>
	</form>

</html>
